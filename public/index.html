
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Sam Hamilton</title>
  <meta name="author" content="Sam Hamilton">

  
  <meta name="description" content="I&rsquo;m not sure where to put this, but I wanted to share this tidbit of info. I was having an issue where I would see all these hanging /bin/bash &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.samhamilton.co.uk">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.samhamilton.co.uk/samhamilton-co-uk" rel="alternate" title="Sam Hamilton" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4507040-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.samhamilton.co.uk/samhamilton-co-uk" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.samhamilton.co.uk" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/24/getting-rvm/">Getting RVM</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-24T17:19:00+08:00" pubdate data-updated="true">Jan 24<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m not sure where to put this, but I wanted to share this tidbit of info.</p>

<p>I was having an issue where I would see all these hanging /bin/bash processes calling runner and rake that were being fired off by cron. Turns out my .rvmrc file in my app folder was causing the problem. Rvm by default will prompt to trust or not trust the file. This causes bash to hang. The solution I used was to disable the prompt by adding this line to my user rvm file in ~/.rvmrc</p>

<p><code>rvm_trust_rvmrcs_flag=1</code></p>

<p>Have a read of the <a href="https://github.com/javan/whenever/wiki/RVM-Notes">RVM Wiki</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/18/heroku-my-new-best-friend/">Heroku - My New Best Friend</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-18T15:56:00+08:00" pubdate data-updated="true">Jan 18<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just found this great little Heroku tweak that can reduce your downtime when deploying appications, they allow you to <a href="https://devcenter.heroku.com/articles/labs-preboot">preboot</a> the new version before tearing down the old one.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/03/upgrading-spree-from-1-dot-1-2-to-1-dot-1-3/">Upgrading Spree From 1.1.2 to 1.1.3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-03T17:22:00+08:00" pubdate data-updated="true">Sep 3<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you upgraded Spree from 1.1.2 to 1.1.3 and found that the checkout didn&rsquo;t work with some error about zones</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ActiveRecord::StatementInvalid (PG::Error: ERROR:  column "zone_members_count" does not exist
</span><span class='line'>LINE 1: ...LECT "spree_zones".* FROM "spree_zones"  ORDER BY zone_membe...
</span><span class='line'>                                                             ^
</span><span class='line'>: SELECT "spree_zones".* FROM "spree_zones"  ORDER BY zone_members_count, created_at):</span></code></pre></td></tr></table></div></figure>


<p>Then perhaps you missed that you needed to run some migrations</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake railties:install:migrations
</span><span class='line'>rake db:migrate</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/28/google-analytics-funnel-setup-for-spree-commerce/">Google Analytics Funnel Setup for Spree Commerce</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-28T15:34:00+08:00" pubdate data-updated="true">Aug 28<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the setup of any new ecommerce system you will need to monitor your checkout for cart abandonment to find the drop off points and carefully fix them, here is how I setup analytics for Spree Commerce 1.1.x.</p>

<ul>
<li>Goal Type: URL Destination</li>
<li>Goal URL: /orders/R[0-9]{1,8}</li>
<li>Use funnel: Ticked</li>
<li>Required Step: Ticked</li>
<li>Step 1: /checkout</li>
<li>Step 2: /checkout/delivery</li>
<li>Step 3: /checkout/payment</li>
</ul>


<p><img src="/images/spree-funnel.png"></p>

<p>Thanks to <a href="https://groups.google.com/d/topic/spree-user/_gPjQKEwug4/discussion">Ryan</a> for the RegEx</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/24/non-www-to-www-nginx-redirect/">Non-www to Www Nginx Redirect</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-24T14:36:00+08:00" pubdate data-updated="true">Aug 24<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Add this small block of code into your server{} block to redirect all non-www to the www version of your website.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>if ($host != 'www.samhamilton.co.uk' ) {
</span><span class='line'>  rewrite  ^/(.*)$  http://www.samhamilton.co.uk/$1  permanent;
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/19/migrating-to-octopress/">Migrating to Octopress</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-19T15:48:00+08:00" pubdate data-updated="true">Aug 19<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So migrated from Wordpress to <a href="http://octopress.org/">Octopress</a>. Most of the migration was automated by using <a href="https://github.com/thomasf/exitwp/">exitwp</a> but to get slideshare I had to use <a href="http://shogo82148.github.com/blog/2012/08/09/oembed/">Oembed</a>, also found a great list of themes on <a href="https://github.com/imathis/octopress/wiki/List-Of-Octopress-Themes">github</a>.</p>

<p>So far so good, writing posts in markdown is great and also now not having to worry about keeping up with Wordpress security updates is nice but for me is about finally being free of MySQL databases and Wordpress was the last thing running on it, weird in this day and age of easy multiple database support Wordpress still forces you to use MySQL.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/12/internet-speed/">Internet Speed</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-12T18:30:18+08:00" pubdate data-updated="true">Nov 12<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Well the internet speed in Hangzhou is much better than Shanghai. I am paying the same amount of money as in Shanghai but getting a better connection!</p>

<p><img src="http://www.speedtest.net/result/1587255700.png" alt="" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/23/small-script-to-remove-a-list-of-directories/">Small Script to Remove a List of Directories</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-23T04:13:38+08:00" pubdate data-updated="true">Sep 23<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content">

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat list-of-directories.txt|while read f; do
</span><span class='line'>if [ -e "$f" ]; then rm -rf "$f"; fi; done```</span></code></pre></td></tr></table></div></figure>


<p>thanks <a href="http://www.linuxquestions.org/questions/programming-9/scripting-problem-rm-filelist-460910/#post2320128">unSpawn</a>!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/21/amazing-himalayas-photos/">Amazing Himalayas Photos</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-21T23:39:01+08:00" pubdate data-updated="true">Sep 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Just ran across this guys <a href="http://www.flickr.com/photos/jankovoy/sets/72157627338647869/with/6048498636/">photos from the Himalayas</a></p>

<p><a href="http://www.flickr.com/photos/jankovoy/6048498636/"><img src="http://farm7.static.flickr.com/6195/6048498636_e5d6986d4c_z.jpg" alt="NILGIRI SOUTH (6839 m)" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/25/crappy-internet/">Crappy Internet</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-25T20:51:33+08:00" pubdate data-updated="true">Jul 25<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Alex, a good friend of mine here in Shanghai, recently vented his <a href="http://alex-duncan.co.uk/i-spend-3-weeks-a-year-waiting-for-websites-to-load-2011-07-23.html">frustration about working and living in China</a> when your work relies on a good quality internet connection and I can&rsquo;t agree more.</p>

<p>For the last couple of weeks Google has been once again targeted by the censors but in a truly frustrating way, you can search for something and get back the first page of results (most of the time) but then if you refine your search or do another search straight after the great firewall blocks Google and you end up with an error page. I am very ashamed to say that I have had to resort to using Bing to find some things over the past couple of weeks but the Bing results are just of a poorer quality which then frustrates me even more as I know Google would have found what I was looking for after a couple of refinements.</p>

<p>There are a couple of points where our view diverge:</p>

<p>He brings up the point that a US company will need good internet to the USA to use their tools (ERP, CRM etc etc) but this is not what the majority of the companies who are here need to use, the government regulations have restricted the truely massive corporations coming into China in one way or another and so far the largest companies in China probably are mostly Chinese in origin and probably most of them are government owned.</p>

<p>Alex ponders if bad internet will have a knock on economic effect and I think it will but not in the way that he expects. Instead of China becoming the next India where you can outsource your &ldquo;services&rdquo;, bad international internet will localise people and already has, just look at the Chinese Twitter and Facebook clones. China will become more introverted and that is a bad thing because a country so large and a people so proud should be sharing with the rest of the world not looking inwards.</p>

<p>What you have to remember is that local internet, i.e. internet within China is OK &ndash; you can perfectly stream videos, watch tv, search the internet, tweet on the local twitter clone and not hit a single problem. I have had 2M internet for nearly seven years and ok the upgrade to 10M+ is well overdue if you compare internet speeds to Hong Kong, Korea or even the UK but compared to the USA it seems just about on a par.</p>

<p>Companies who want to expand into China need to remember that China is almost like a sparate zone of the internet where the normal rule dont apply, sticking a CDN box in Hong Kong does not mean people in Shanghai or Beijing will have good speeds even if the normal rules about proximity would mean that it would. If you truly want fast local access to your services in China then get a CDN with local Chinese nodes and no Hong Kong does not count.</p>

<p>Here is the China network diagram from a <a href="http://www.cdnetworks.com/solutions/china-acceleration/">decent CDN</a> who truly understand China &ndash; show me another CDN that has that network in China? Akamai perhaps but they won&rsquo;t show.</p>

<p><img src="/images/china_acceleration.jpg"></p>

<p>One last thing to throw on the fire &ndash; Shanghai has plenty of <a href="/images/Equinix_Submarine_TGMap_MTS_15.pdf">submarine cables</a> and also China has Hong Kong one of the greatest gathering of submarine cables in the world, if they wanted international internet to work they could, the trouble is that they dont.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/01/24/getting-rvm/">Getting RVM</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/18/heroku-my-new-best-friend/">Heroku - My New Best Friend</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/03/upgrading-spree-from-1-dot-1-2-to-1-dot-1-3/">Upgrading Spree From 1.1.2 to 1.1.3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/28/google-analytics-funnel-setup-for-spree-commerce/">Google Analytics Funnel Setup for Spree Commerce</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/24/non-www-to-www-nginx-redirect/">Non-www to Www Nginx Redirect</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/samhamilton">@samhamilton</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'samhamilton',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/105616892210904293027?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo">Copyright &copy; 2013

    Sam Hamilton


</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'samhamilton';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
